<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
      
    

      <title></title>

      
      

      <!-- CSS -->
      
      <link rel="stylesheet" href="https://lymslive.github.io/vimllearn/book.css">
      

      
      
    </head>

    <body>
        <div class="menu">
            
            
            <nav role="navigation">
                <ul>
                    
                        
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch00-prefcace/">
                                    
                                    前言
                                </a>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch01-viml-feature/">
                                    
                                    第一章 VimL 语言主要特点
                                </a>
                                
                                    <ul>
                                        
                                            <li class="active">
                                                <a href="https://lymslive.github.io/vimllearn/ch01-viml-feature/sn1-hello-world/">
                                                    
                                                    1.1 Hello World 的四种写法
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch01-viml-feature/sn2-from-ex-command/">
                                                    
                                                    1.2 同源 ex 命令行
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch01-viml-feature/sn3-week-type-strong-scope/">
                                                    
                                                    1.3 弱类型强作用域
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch01-viml-feature/sn4-autoload-schema/">
                                                    
                                                    1.4 自动加载脚本机制
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch02-viml-grammar/">
                                    
                                    第二章 VimL 语言基本语法
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch02-viml-grammar/sn1-variable-type/">
                                                    
                                                    2.1 变量与类型
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch02-viml-grammar/sn2-comapare-condition/">
                                                    
                                                    2.2 选择与比较
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch02-viml-grammar/sn3-loop-iterate/">
                                                    
                                                    2.3 循环与迭代
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch02-viml-grammar/sn4-function-call/">
                                                    
                                                    2.4 函数定义与使用
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch02-viml-grammar/sn5-exception-error/">
                                                    
                                                    2.5 异常处理
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch03-viml-command/">
                                    
                                    第三章 Vim 常用命令
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch03-viml-command/sn1-option-set/">
                                                    
                                                    3.1 选项设置
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch03-viml-command/sn2-key-remap/">
                                                    
                                                    3.2 快捷键重映射
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch03-viml-command/sn3-custom-command/">
                                                    
                                                    3.3 自定义命令
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch03-viml-command/sn4-execute-normal/">
                                                    
                                                    3.4 execute 与 normal
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch03-viml-command/sn5-autocmd-event/">
                                                    
                                                    3.5 自动命令与事件
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch03-viml-command/sn6-debug-command/">
                                                    
                                                    3.6 调试命令
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch04-viml-datastruct/">
                                    
                                    第四章 VimL 数据结构进阶
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch04-viml-datastruct/sn1-list-string/">
                                                    
                                                    4.1 再谈列表与字符串
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch04-viml-datastruct/sn2-dictionary/">
                                                    
                                                    4.2 通用的字典结构
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch04-viml-datastruct/sn3-nest-compose/">
                                                    
                                                    4.3 嵌套组合与扩展
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch04-viml-datastruct/sn4-regex-apply/">
                                                    
                                                    4.4 正则表达式
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch05-viml-function/">
                                    
                                    第五章 VimL 函数进阶
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch05-viml-function/sn1-variable-argument/">
                                                    
                                                    5.1 可变参数
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch05-viml-function/sn2-function-refer/">
                                                    
                                                    5.2 函数引用
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch05-viml-function/sn3-dict-function/">
                                                    
                                                    5.3 字典函数
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch05-viml-function/sn4-closure-lambda/">
                                                    
                                                    5.4 闭包函数
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch05-viml-function/sn5-autoload-function/">
                                                    
                                                    5.5 自动函数
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch06-builtin-function/">
                                    
                                    第六章 VimL 内建函数使用
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch06-builtin-function/sn1-operate-datatype/">
                                                    
                                                    6.1 操作数据类型
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch06-builtin-function/sn2-operate-edit-object/">
                                                    
                                                    6.2 操作编辑对象
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch06-builtin-function/sn3-operate-filesystem/">
                                                    
                                                    6.3 操作系统文件
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch06-builtin-function/sn4-other-utility/">
                                                    
                                                    6.4 其他实用函数
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch07-object-program/">
                                    
                                    第七章 VimL 面向对象编程
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch07-object-program/sn1-object-intro/">
                                                    
                                                    7.1 面向对象的简介
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch07-object-program/sn2-dict-object/">
                                                    
                                                    7.2 字典即对象 
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch07-object-program/sn3-object-organize/">
                                                    
                                                    7.3 自定义类的组织管理
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch08-viml-asynchronous/">
                                    
                                    第八章 VimL 异步编程特性
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch08-viml-asynchronous/sn1-asynchronous-intro/">
                                                    
                                                    8.1 异步工作简介
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch08-viml-asynchronous/sn2-asynchronous-job/">
                                                    
                                                    8.2 使用异步任务
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch08-viml-asynchronous/sn3-channle-job/">
                                                    
                                                    8.3 使用通道控制任务
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch08-viml-asynchronous/sn4-internal-terminal/">
                                                    
                                                    8.4 使用配置内置终端
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch09-viml-mix-program/">
                                    
                                    第九章 VimL 混合编程
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch09-viml-mix-program/sn1-extern-filter/">
                                                    
                                                    9.1 用外部语言写过滤器
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch09-viml-mix-program/sn2-extern-interface/">
                                                    
                                                    9.2 外部语言接口编程
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch09-viml-mix-program/sn3-perl-interface/">
                                                    
                                                    9.3 Perl 语言接口开发
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/ch10-viml-plugin-develop/">
                                    
                                    第十章 Vim 插件管理与开发
                                </a>
                                
                                    <ul>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch10-viml-plugin-develop/sn1-plugin-directory/">
                                                    
                                                    10.1 典型插件的目录规范
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch10-viml-plugin-develop/sn2-plugin-manager/">
                                                    
                                                    10.2 插件管理器插件介绍
                                                </a>
                                            </li>
                                        
                                            <li >
                                                <a href="https://lymslive.github.io/vimllearn/ch10-viml-plugin-develop/sn3-plugin-devflow/">
                                                    
                                                    10.3 插件开发流程指引
                                                </a>
                                            </li>
                                        
                                    </ul>
                                
                            </li>
                        
                            
                            <li >
                                
                                <a href="https://lymslive.github.io/vimllearn/chA1-postfcace/">
                                    
                                    结语
                                </a>
                                
                            </li>
                        
                    
                </ul>
            </nav>
            
            
        </div>

        <div class="page">
            <div class="page__header">
                <div class="menu-icon">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                
                <span class="search-icon">🔎</span>
                
            </div>

            <div class="page__content">
                
                <div class="search-container">
                    <input id="search" type="search" placeholder="Search..">
                    <div class="search-results">
                        <div class="search-results__header"></div>
                        <ul class="search-results__items"></ul>
                    </div>
                </div>
                
                <div class="book-content">
                    
    <h1>1.1 Hello World 的四种写法</h1>
    <!-- ## 1.1 Hello World 的四种写法 -->
<p>按惯例，我们讨论一门语言，首先看下如何写最简单的 “Hello World” （程序）。
由于 Vim 是高度自由的，VimL 也有多种不同的方式玩转 “Hello World”。</p>
<h3 id="su-guan-pai-zhi-jie-cao-qi-ming-ling-xing">速观派：直接操起命令行</h3>
<p>最快速的办法是在 Vim 命令行下用 <code>:echo</code> 命令输出 “Hello World”：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>: </span><span style="color:#96b5b4;">echo </span><span style="color:#a3be8c;">&#39;Hello World!&#39;
</span></code></pre>
<p>唯一需要注意的是，得把 “Hello World” 用引号括起来，单引号或双引号都可以。
这样再按下回车就能在 Vim 的消息区显示出 “Hello World” 这行字符串了。</p>
<p>由于这条消息字符串很简短，一行就能显示完整，Vim 将其直接显示在命令行的位置，并
且运行完直接返回 Vim 普通模式。如果字符串很长或多行字符串，则消息区将向上滚动
，以显示完整的消息，用户需要额外按个回车才回普通模式。</p>
<p>试试在命令行输入这条命令，看看有啥不同反应：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>: </span><span style="color:#96b5b4;">echo </span><span style="color:#a3be8c;">&quot;Hello World! \n Hello World! \n Hello World!&quot;
</span></code></pre>
<p>好了，你已经学会了如何用 VimL 输出 “Hello World” 了。这也算编程吗？别逗了！其
实，别把编程想得那么严肃，那这就算编程！</p>
<h3 id="zheng-gui-pai-jian-li-jiao-ben-wen-jian">正规派：建立脚本文件</h3>
<p>把刚才在命令行输入的那条命令保存在一个 <code>.vim</code> 后缀的文本文件中，那就是一个
<code>vim script</code> 了，这是用 VimL 编程比较正常的用法。</p>
<p>为了方便，建议在本地建个目录，用于保存本教程的示例代码。比如：</p>
<pre data-lang="bash" style="background-color:#2b303b;color:#c0c5ce;" class="language-bash "><code class="language-bash" data-lang="bash"><span style="color:#bf616a;">$</span><span> cd </span><span style="color:#bf616a;">~</span><span>/.vim
</span><span style="color:#bf616a;">$</span><span> mkdir vimllearn
</span><span style="color:#bf616a;">$</span><span> vim vimllearn/hello1.vim
</span></code></pre>
<p>这将在 <code>~/.vim</code> 目录下新建一个 <code>vimllearn</code> 目录，并用 vim 开始编辑一个名为
<code>hello1.vim</code> 的文件。vim 会为该文件新建一个缓冲区 <code>buffer</code>，在该 <code>buffer</code> 中输
入以下文本，然后输入命令 <code>:w</code> 保存：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span style="color:#65737e;">&quot; 文件：hello1.vim
</span><span style="color:#65737e;">&quot; 用途：VimL hello world 示例
</span><span style="color:#65737e;">&quot; 作者：lymslive
</span><span style="color:#65737e;">&quot; 时间：2017-08
</span><span>
</span><span style="color:#96b5b4;">echo </span><span style="color:#a3be8c;">&#39;Hello World!&#39;
</span><span>
</span><span>finish
</span><span>
</span><span>脚本结束了，可以随便浪~~
</span><span>不管写些什么乱七八糟的都木有关系。
</span></code></pre>
<p>你其实可以只在该文件中写入 <code>echo 'Hello World!'</code> 这一行就够了。几点说明：</p>
<ol>
<li>前面以一个双引号 <code>&quot;</code> 开始的行是注释，注释也可以写在行尾。</li>
<li>在脚本文件中，<code>echo</code> 命令前不必加冒号 <code>:</code>，但是加上冒号也是允许的。</li>
<li><code>finish</code> 表示直接结束脚本，在之后的语句都不再被 vim 解析；这是可选的，没有
遇到 <code>finish</code> 就会执行到文件最后一行。</li>
</ol>
<p>当有了 <code>*.vim</code> 脚本文件，就可以在 vim 环境中用 <code>:source</code> 命令加载运行了：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>: source ~</span><span style="color:#96b5b4;">/.vim/</span><span>vimllearn/hello</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">.</span><span>vim
</span></code></pre>
<p>需要将脚本文件的路径写在 <code>source</code> 命令之后作为参数。如果当前 vim 正常编辑
<code>hello1.vim</code> 这个文件，则可用 <code>%</code> 表示当前文件的路径：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>: source </span><span style="color:#b48ead;">%
</span></code></pre>
<p>折腾并解释了这许久，终于可以通过 <code>source</code> 一个 vim 脚本打印输出 “Hello World”
了，与此前的效果是一样一样的。当然了，用 VimL 写脚本肯定不能只满足于写 “Hello
World” 吧，所以这才是标准用法。</p>
<p>此外 Vim 的命令是可以简写的，<code>source</code> 可简写为 <code>so</code>。当你在写一个 vim 脚本时想
快速验证执行该脚本时，可以只输入：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>: so </span><span style="color:#b48ead;">%
</span></code></pre>
<p>如果还想更省键，就定义一个快捷键映射吧，比如：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>: </span><span style="color:#96b5b4;">nnoremap </span><span>&lt;F5&gt; :update&lt;CR&gt;:source </span><span style="color:#b48ead;">%</span><span>&lt;CR&gt;
</span></code></pre>
<p>可以将这行定义加入你的 <code>vimrc</code> 中，不过最好是放在 <code>~/.vim/ftplugin/vim.vim</code> 中
，并加上局部参数，让它只影响 <code>*.vim</code> 文件：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>: </span><span style="color:#96b5b4;">nnoremap </span><span>&lt;buffer&gt; &lt;F5&gt; :update&lt;CR&gt;:source </span><span style="color:#b48ead;">%</span><span>&lt;CR&gt;
</span></code></pre>
<h3 id="ce-shi-pai-jin-ru-ex-mo-shi">测试派：进入 Ex 模式</h3>
<p>直接在命令行用 <code>:echo</code> 查看一些东西其实很有用的，可以快速验证一些记不清楚的细
节。比如你想确认下在 VimL 中字符 <code>'0'</code> 是不是与数字 <code>0</code> 相等，可以这样：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>: </span><span style="color:#96b5b4;">echo </span><span style="color:#a3be8c;">&#39;0&#39; </span><span style="color:#b48ead;">== </span><span style="color:#d08770;">0
</span></code></pre>
<p>但如果要连续输入多条命令并查看结果，每次都要（从普通模式）先输入个冒号，不免有
些麻烦。这时，<code>Ex</code> 模式就有用了。默认情况下（若未在 vimrc 被改键映射），在普通
模式下用 <code>Q</code> 键进入 <code>Ex</code> 模式。例如，在 <code>Ex</code> 模式下尝试各种输出 “Hell World”
的写法，看看不同引号对结果的影响：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>Entering Ex mode</span><span style="color:#b48ead;">.</span><span>  Type </span><span style="color:#a3be8c;">&quot;visual&quot;</span><span> to go to Normal mode</span><span style="color:#b48ead;">.
</span><span>: </span><span style="color:#96b5b4;">echo </span><span style="color:#a3be8c;">&#39;Hello World!&#39;
</span><span>: </span><span style="color:#96b5b4;">echo </span><span style="color:#a3be8c;">&quot;Hello World!&quot;
</span><span>: </span><span style="color:#96b5b4;">echo </span><span style="color:#a3be8c;">&#39;Hello \t World! \n Hello \t World!&#39;
</span><span>: </span><span style="color:#96b5b4;">echo </span><span style="color:#a3be8c;">&quot;Hello \t World! \n Hello \t World!&quot;
</span><span>: vi
</span></code></pre>
<p>最后，按提示用 <code>visual</code> 或简写 <code>vi</code> 命令回到普通模式。</p>
<p>Vim 的 <code>Ex</code> 模式有点像 VimL 的交互式的解释器，不过语法完全一样（有些脚本语言的
交互式解释器与执行脚本有些不同的优化），仍然要用 <code>echo</code> 显示变量的值。</p>
<h3 id="suo-yin-pai-cong-shell-zhi-jie-yun-xing">*索隐派：从 shell 直接运行</h3>
<p>如果只为了运行一个 vim script 脚本，也不一定要先启动 vim 再 <code>source</code>，直接在启
动 vim 时指定特定参数也能办到。<code>-e</code> 参数表示以 <code>Ex</code> 模式启动 vim，<code>-S</code> 参数启
动后立即 source 一个脚本。因此，也可以用如下的命令来输出 “Hello World”：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>$ cd ~</span><span style="color:#96b5b4;">/.vim/</span><span>vimllearn
</span><span>$ vim -eS hello</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">.</span><span>vim
</span></code></pre>
<p>这就相当于使用 <code>vim</code> 解释器来运行 <code>hello.vim</code> 这个脚本，并且停留在交互式界面
上。此时可以用 <code>:q</code> 命令退出，或 <code>:vi</code> 以正常方式继续使用 Vim。</p>
<p>vim 本身的命令行启动参数其实还支持很多功能，请查阅 <code>:help starting</code>。其中还有
个特殊的参数是 <code>-s</code>，如果与 <code>-e</code> 联用，就启动静默的批处理模式，试试这个：</p>
<pre data-lang="vim" style="background-color:#2b303b;color:#c0c5ce;" class="language-vim "><code class="language-vim" data-lang="vim"><span>$ vim -eS hello</span><span style="color:#d08770;">1</span><span style="color:#b48ead;">.</span><span>vim -s
</span></code></pre>
<p>没有任何反应输出？因为 <code>-s</code> 使普通的 <code>echo</code> 提示无效，看不到任何提示！赶紧输入
<code>q</code> 回车退出 vim 回到 shell。因为如果不小心按了其他键，vim 可能就将其当作命令
来处理了，而且不会有任何错误提示，这就会让大部分人陷入不知如何退出 vim 的恐慌
。</p>
<p>虽然 <code>vim -e -s</code> 不适合来输出 “Hello World”，但如果你的脚本不是用来做这种无聊
的任务，这种模式还是有用的。比如批处理，在完全不必启动 vim 可视编辑的情况下，
批量地对一个文件或多个文件执行编辑任务。可达到类似 <code>sed</code> 的效果。而且，在 vim
脚本写好的情况下，不仅可以按批处理模式执行，也可以在正常 Vim 可视编辑某个文件
时，遇到类似需求时，也可以再手动 <code>:source</code> 脚本处理。</p>
<h3 id="xiao-jie">小结</h3>
<p>运行 vim 脚本的常规方法用 <code>:source</code> 命令，而且有很多情况下并不需要手动输入
<code>:source</code> 命令，在满足一定条件下，vim 会自动帮你 source 一些脚本。vim 的启动参
数 <code>-S</code> 其实也是执行 <code>:source</code>。</p>
<p>Vim 的命令行可以随时手动输入一些简短命令以验证某些语法功能，进入 <code>Ex</code> 模式则可
以连续手动输入命令并执行。<code>Ex</code> 模式虽然比较少用，但不该反感排斥，这对学用 VimL
还是大有裨益的，以后会讲到，VimL 的 debug 功能也是在 <code>Ex</code> 模式中的。</p>
<p>静默批处理 <code>vim -e -s</code> 本质上也是 <code>Ex</code> 模式，不过禁用或避免了交互的中断。属于
黑科技，一般的 vim 用户可先不必深究。</p>
<h3 id="tuo-zhan-yue-du-vim-yu-ke-shi-hua">*拓展阅读：Vim 与可视化</h3>
<p>“可视化”是个相对的概念。现在说到可视化，似乎是指功能丰富的 IDE 那种，有很多辅
助窗口展示各方面的信息，甚至有图形化来表示类层次关系与函数调用关系。还有传说中
的唯一的中文编程语言“易语言”还支持图文框拖拖拽拽就能编写代码的东东……而 vim 这
种古董，只有编辑纯文本，似乎就该归属于“不可视”。</p>
<p>然而，让我们回顾洪荒时代，体验一下什么叫真正的“不可视”编辑。</p>
<p>在 Vi 都还没诞生的时代，有一个叫 <code>ed</code> 的行编辑器，它只能通过命令以行为单位去操
作或编辑文本文件。它完全没有界面，无从知道当前编辑的是哪个文件，在哪行，当前行
是什么内容，用户只能“记住”，或用命令查询。比如用 <code>p</code> 命令打印显示当前行（不过
也可以在前面带上行地址打印多行，至今 <code>vim</code> 的大部分命令都可以带地址参数）。要
编辑当前行，请用 <code>a</code> <code>i</code> 或 <code>c</code> 命令（vimer 有点眼熟吧），不过编辑完后也无从知
晓结果是否正确，可能还需要再用 <code>p</code> 命令打印查看确证。</p>
<p>之后，有个 <code>ex</code> 编辑器，不过是对 <code>ed</code> 的命令进行了扩展，本质上仍是行编辑器。直
到 <code>vi</code> 横空出世，那才叫“屏幕编辑器”。意思是可以全屏显示文件的许多行，移动光标
实时修改某一可见行，修改结果即时显示……这才像我们现在可认知的编辑器了。</p>
<p>然后是 <code>vim</code> 对 <code>vi</code> 的扩展增强。事实上，<code>vim</code> 还不如 <code>vi</code> 的划时代意义，它的
增强与此前 <code>ex</code> 对 <code>ed</code> 的增强是差不多的程度，基本上是平行扩展。</p>
<p>可视化程度不是越高越好。 <code>vim</code> 与 <code>vi</code> 都保留与继承了 <code>ex</code> 的命令，因为 <code>ex</code>
命令确实高效，当你能确知一个命令的运行结果，就没必要关注中间过程了。比如最平凡
无奇但常用的 <code>ex</code> 命令就是 <code>:s</code> 全局替换命令。</p>
<p>VimL 语言就是基于 <code>ex</code> 命令的，再加上一些流程控制，就成了一种完整的脚本语言。
如果说 <code>vim</code> 对 <code>vi</code> 有什么压倒性的里程碑意义，我觉得应是丰富完善了 VimL 语言
，使得 <code>vim</code> 有了无穷的扩展与定制。利用 VimL 写的插件，既可以走增加可视化的方
向，也可以不增加可视化而偏向自动化。依每人的性格习惯不同，可能会在 Vim 的可视
化与自动化之间找到适合自己的不同的平衡点。</p>
<!--
—— 楼上的天花乱坠地在说些什么呀

—— 不知道耶，再看看吧
-->


                </div>
            </div>

            <div class="prev-link">
                
    
        
        
        <a class="previous" href="https://lymslive.github.io/vimllearn/ch01-viml-feature/"><</a>
    

            </div>

            <div class="next-link">
                
    
        <a class="next" href="https://lymslive.github.io/vimllearn/ch01-viml-feature/sn2-from-ex-command/">></a>
    

            </div>
        </div>

        
            
            <script type="text/javascript" src="https://lymslive.github.io/vimllearn/elasticlunr.min.js"></script>
            <script type="text/javascript" src="https://lymslive.github.io/vimllearn/search_index.en.js"></script>
            
            <script type="text/javascript" src="https://lymslive.github.io/vimllearn/book.js"></script>
        
    </body>

</html>
